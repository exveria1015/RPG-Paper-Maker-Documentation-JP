# カメラ制御

2Dゲームでは、重要なシーンに躍動感を加えるために、画面の動きに制限されています。3Dカメラは、シーンに多くの可能性（移動、回転、ズームなど）を提供します。カメラを正しく使用するには、いくつかの基本的な知識が必要です。

<figure><img src="../.gitbook/assets/camera.gif" alt=""><figcaption></figcaption></figure>

## カメラ <a href="#the-camera" id="the-camera"></a>

まず、カメラとは何かを知る必要があります。素晴らしい映画のカメラマンになったと思ってください。シーンを撮影するために最初に必要な2つのことは次のとおりです。

* **カメラの位置**
* **ターゲットの位置**（= カメラが見ている場所）

スクリプトのおかげで、これらの2つの位置は常にアルゴリズムによって計算されます。これらの位置は、以下に従って計算されます。

* **ターゲットの位置**と潜在的な**オフセット**
* カメラとターゲット間の**距離**
* カメラとターゲット間の**水平角度**
* カメラとターゲット間の**垂直角度**

## 距離 <a href="#the-distance" id="the-distance"></a>

![](../.gitbook/assets/camera-distance.png)

距離とは、カメラとターゲット間の距離を示す単純な正の値です。これは、3つの軸すべてを考慮する必要があります。これはズームに使用されます。デフォルト値は125です。

## 水平角度 <a href="#the-horizontal-angle" id="the-horizontal-angle"></a>

![](../.gitbook/assets/camera-h.png)

水平角度は、X軸とZ軸にのみ適用されます。たとえば、ターゲットを水平方向に回転させたい場合は、この値を変更する必要があります。デフォルト値は-90°です。

## 垂直角度 <a href="#the-vertical-angle" id="the-vertical-angle"></a>

![](../.gitbook/assets/camera-v.png)

垂直角度と同じですが、Y軸にのみ適用されます。たとえば、ターゲットを垂直方向に回転させたい場合は、この値を変更する必要があります（下に移動するには値を増やし、上に移動するには値を減らす必要があります）。デフォルト値は55°です。

## カメラ移動コマンド <a href="#the-move-camera-command" id="the-move-camera-command"></a>

ここまでで、カメラのプロパティについて少し理解できたので、カメラを動的に移動する方法を見ていきましょう。カメラ移動イベントコマンドの出番です。

![](../.gitbook/assets/command-move-camera.png)

* **カメラターゲット**: デフォルトでは、カメラは常にヒーローを見ています。
  * `変更なし`: 現在のカメラターゲットを維持します。
  * `オブジェクトID`: フォーカスする新しいオブジェクトIDを選択すると、カメラはその位置に移動し、それを新しいターゲットと見なします。
* **操作**: ここで、変更された値に適用する操作の種類を選択できます。たとえば、(+)を選択し、距離を5に設定した場合、以前の距離値が125であれば、125 + 5 = 130になります。
* **移動**: ここで、3つの軸上のカメラの位置を変更できます（正方形単位またはピクセル単位で選択できます）。
  * `ターゲットオフセット`: このオプションがオンの場合、カメラとターゲットオフセットの位置を同時に移動します。2Dゲームでは、ヒーローの位置を無視して画面だけを移動したい場合と同じです。

![ターゲットオフセットOFFでX+10マス移動](../.gitbook/assets/camera-move-off.gif)

![ターゲットオフセットONでX+10マス移動](../.gitbook/assets/camera-move-on.gif)

* `カメラの向きを考慮する`: _(未実装)_ これは、軸がカメラの位置に応じて変更されることを考慮しているだけです（[オブジェクト移動コマンド](event-commands.md#move-object)の同じオプションを参照）。
* **回転**: ここで、カメラの水平角度と垂直角度を変更して回転を適用できます。
  * `ターゲットオフセット`: 移動の場合と同じです。今回は、ターゲットがカメラを中心に回転します。

![ターゲットオフセットOFFで水平角度に360°加算](../.gitbook/assets/camera-h-r-off.gif)

![ターゲットオフセットONで水平角度に360°加算](../.gitbook/assets/camera-h-r-on.gif)

![ターゲットオフセットOFFで垂直角度に360°加算](../.gitbook/assets/camera-v-r-off.gif)

![ターゲットオフセットONで垂直角度に360°加算](../.gitbook/assets/camera-v-r-on.gif)

* **ズーム**: カメラとターゲット間の距離を設定して、ズーム効果を作成できます。
  * `距離`: 更新する距離（ピクセル単位）。
* `次のコマンドの前に移動の終了を待つ`: 次のコマンドの前に移動の終了を待ちます（[オブジェクト移動コマンド](event-commands.md#move-object)と同じ）。カメラの移動中にコマンドを実行するために使用できます（テキストの表示、サウンドなど）。
* `時間`: ここで、カメラが最終位置に移動するまでの時間を秒単位で指定します。0の場合、移動は即座に行われます。

## カメラのプロパティ <a href="#camera-properties" id="camera-properties"></a>

新しいマップに移動するときのカメラのデフォルトのプロパティを制御できます。`マップのプロパティ`でカメラIDを設定できます。また、`システムマネージャー > システム`でカメラのプロパティリストにアクセスすることもできます。

![](../.gitbook/assets/camera-properties.png)

* `名前`: カメラのプロパティの名前。
* `距離`: カメラとヒーロー間の距離。
* `水平角度`: カメラとヒーロー間の水平角度。
* `垂直角度`: カメラとヒーロー間の垂直角度。
* `ターゲットオフセット`: 各軸上の位置。ターゲットの位置にオフセットを追加するために使用します。
* `視野角`: カメラの視野角の制限を決定するために使用される角度。デフォルト値を維持することをお勧めします。
* `ニア`: カメラと要素間の最小距離。この距離より近い要素は描画されます。デフォルト値を維持することをお勧めします。
* `ファー`: カメラと要素間の最大距離。この距離より遠い要素は描画されません。デフォルト値を維持することをお勧めします。