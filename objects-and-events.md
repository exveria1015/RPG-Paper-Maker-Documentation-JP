---
description: ゲームに命を吹き込みましょう。
---

# オブジェクトとイベント

美しいマップを作成する方法がわかったところで、NPC、宝箱などを追加してマップに命を吹き込みましょう。これらの要素は「オブジェクト」と呼ばれます。これらのオブジェクトは、「イベント」（ヒーローのアクション、クロノメーター、攻撃など）にも反応します。オブジェクトとイベントは、マップを活性化し、ゲームのストーリーを作成するためのものです！

## イベント <a id="events"></a>

**/！ RPG Paper Maker のイベントは、RPGツクールクラシックシリーズのイベントとは異なる概念です。**

`システムマネージャー` > `イベント/ステート` でイベントにアクセスできます。

![](.gitbook/assets/systems-manager-events-states.png)

イベントは、何か重要なことが起こったという事実を表し、マップ内のオブジェクトはそれに反応したり、しなかったりします。イベントとは、たとえば、ヒーローがアクションボタンを押したという事実や、暴風雨がちょうど始まったという事実などです。これらのイベントは、他のオブジェクトによってオブジェクトに送信されます。イベントには2つのタイプがあります。

* **システムイベント**（時間、キーボードの押下など）。これは、マップ内のオブジェクトではなく、ゲームシステム自体によって送信されます。
* **ユーザーイベント**（クエスト完了、剣による攻撃）。これは自分で作成し、ローカルオブジェクトを介して送信できます。

イベントはまた、いくつかの `パラメータ` を取ります。たとえば、バックグラウンドで3秒ごとにサウンドを再生したい場合は、パラメータ time = 3000（ミリ秒）、repeat = ON を指定して時間イベントを使用できます。パラメータを使ってできる素晴らしいことを想像してみてください（たとえば、剣の攻撃イベントにパワーパラメータを設定するなど）。イベントのパラメータを編集するときに、パラメータのデフォルト値を選択できます。

**/！ 物理とイベントを混同しないでください。風のアニメーションや重力などにイベントを使用しないでください。**

## リアクション <a id="reactions"></a>

リアクションは、順番に実行されるコマンドのツリーです。たとえば、コマンドは、画面にテキストを表示したり、マップ内の特定のオブジェクトを移動したりすることができます。リアクションの例を次に示します。

![リアクション](https://rpg-paper-maker.github.io/basics/img/example-reaction.png)

このリアクションは、変数 myValue が 2 と等しいかどうかをチェックします。OK の場合、「OKです！」というメッセージが表示されます。そうでない場合は、「後で戻ってきてください。」というメッセージが表示されます。

リアクションに新しいコマンドを編集/追加するには、対応するノードを `ダブルクリック` します。これにより、コマンドの大きなリストを含むこのウィンドウが開きます。

![コマンド](https://rpg-paper-maker.github.io/basics/img/event-commands.png)

これらのコマンドの詳細については、後で1つずつ見ていきます。

キーボード検索を使用してコマンドをすばやく見つける方法もあります。

![](https://rpg-paper-maker.github.io/basics/img/commands-keyboard.png)

また、対応するコマンドノードを `右クリック` することで、コピー/貼り付け/削除を行うこともできます。

## 共通リアクション <a id="common-reactions"></a>

同じコマンドセットを何度もコピーしていることに気付いたら、共通リアクションの作成を検討する必要があるかもしれません。これらには、`システムマネージャー` > `共通リアクション` からアクセスできます。

![共通リアクション](https://rpg-paper-maker.github.io/basics/img/common-reactions.png)

このようにして、常にコピーするのではなく、この共通リアクションを呼び出すことができます。リアクションにバリエーションがある場合は、パラメータも取ります。

* `リアクション時にヒーローをブロック`: チェックを入れると、リアクションが終了するまでヒーローは移動できなくなります。

## オブジェクト <a id="objects"></a>

オブジェクトとは、マップ内で移動したり、イベントに反応したりできるものです。したがって、基本的に木はオブジェクトではありません（切ることができ、斧による攻撃に反応する場合を除く）。それは単なる静的な要素です。NPC、モンスター、その他何でもかまいません。ヒーロー自身もオブジェクトであるため、そのリアクションを完全にプログラムできます。

マップにオブジェクトを追加するには、`オブジェクト` マップエディターセクションを選択します。マップのマスをポイントし、`ダブルクリック` するか、マスをクリックした後に `Enter` キーを押します。これにより、新しいウィンドウが開きます。

![オブジェクト](https://rpg-paper-maker.github.io/basics/img/object-map.png)

* `名前`: オブジェクトの名前を選択します。これは、後でこのオブジェクトに対して外部からアクションを実行したい場合に役立ちます。
* `フレームごとに1つのイベントのみ`: イベントについては後述しますが、チェックを入れると、オブジェクトはフレームごとに1つのリアクションのみを持ち、同時に複数のリアクションを持つことはありません。
* `モデル`: このオブジェクトのモデルを選択します。モデルの構成方法については、後で説明します。

### イベント <a id="events_1"></a>

`イベント` セクションで、オブジェクトが反応できるイベントを構成できます。ノードを `ダブルクリック` します。

![イベント](https://rpg-paper-maker.github.io/basics/img/event.png)

ユーザーイベントとシステムイベントのどちらにするかを選択し、パラメータ値を変更できます。

![パラメータ値](https://rpg-paper-maker.github.io/basics/img/event-parameters.png)

システムイベントは次のとおりです。

* `時間`: 時間間隔がクリアされると送信されるイベント。
  * **間隔**（デフォルト: 0）: 待機時間（ミリ秒単位）。
  * **繰り返し**（デフォルト: ON）: 各間隔の後、または1回だけイベントを送信します。
* `クロノメーター`: _まだ使用できません。_
* `キー押下`: キーボードのキーを押すと送信されるイベント。
  * **ID**（デフォルト: 任意）: キーのID。
  * **繰り返し**（デフォルト: OFF）: ONの場合、このイベントは、最初に押したときにわずかなオフセットを置いて、キーを押している限り送信されます。
  * **即時繰り返し**（デフォルト: OFF）: ONの場合、このイベントは、オフセットなしでキーを押している限り送信されます。
* `キー解放`: キーボードのキーを離すと送信されるイベント。
  * **ID**（デフォルト: 任意）: キーのID。

### ステート <a id="states"></a>

オブジェクトには、一連の `ステート` があります。たとえば、ヒーローは通常の状態、または毒/脆弱な状態になる可能性があります。オブジェクトは同時に複数の状態になる可能性があることに注意してください。

このリストに新しいステートを追加できます。また、新しい共通ステートを作成する場合は、`完全なリストを更新...` ボタンがあります。

![ステート](https://rpg-paper-maker.github.io/basics/img/object-state-second.png)

ステートごとに、特定のイベントに対する異なるリアクションを選択する必要があります。`リアクションのコピー` ボタンと `リアクションの貼り付け` ボタンを使用して、ステート間でリアクションをコピー/貼り付けできます。これらの異なるオプションは、各ステートでも使用できます。

![ステートのリアクションの設定](https://rpg-paper-maker.github.io/basics/img/state-options.png)

* `グラフィック`: ここでオブジェクトのグラフィック（キャラクター画像）を選択します。以下で、要素の種類（スプライトなど）を選択します。
* `移動`: リアクションがない場合のオブジェクトの移動にリンクされたオプション。

  * `タイプ`: 移動のタイプ。
    * `固定`: オブジェクトはまったく移動しません。
    * `ランダム`: オブジェクトはマップ内をランダムに移動します。
    * `ルート`: オブジェクトは、`ルートの編集...` ボタンで編集できるルートをループします。移動オブジェクトコマンドのドキュメント[こちら](event-commands.md#move-object)をご覧ください。まったく同じです。

  \`\`

  * `速度`: オブジェクトが移動しているときの速度値。この値は、移動距離に等しい時間で乗算されます。これはフレームの長さにも乗算されます。デフォルト値は1です。
  * `頻度`: オブジェクトが移動しているときの頻度値。この値は、次の移動を実行するまでに待機する時間を秒単位で変更します。デフォルト値は0（秒）です。



  注意: 速度と頻度のリストは、`システムマネージャー` > `システム` で編集できます。

![](.gitbook/assets/speeds.png)

![](.gitbook/assets/frequencies.png)

* `名前`: 速度/頻度の名前。
* `値`: 速度/頻度の値（数値のみ）。
* `移動アニメーション`: チェックを入れると、移動アニメーションのためにキャラクターのすべてのフレームが描画されます。チェックを外すと、キャラクターアニメーションの最初のフレームのみが描画されます。
* `停止アニメーション`: _（まだ使用できません）_ チェックを入れると、停止アニメーションのためにキャラクターのすべてのフレームが描画されます。チェックを外すと、キャラクターアニメーションの最初のフレームのみが描画されます。
* `登攀アニメーション`: _（まだ使用できません）_ チェックを入れると、登攀アニメーションのためにキャラクターのすべてのフレームが描画されます。チェックを外すと、キャラクターアニメーションの最初のフレームのみが描画されます。
* `方向固定`: _（まだ使用できません）_ チェックを入れると、ヒーローを見るためにグラフィックの方向が変わりません。チェックを外すと、ヒーローの方を向きます。
* `カメラに合わせて設定`: チェックを入れると、カメラの向きに応じてグラフィックの向きが更新されます。チェックを外すと、カメラの向きは何も変更しません。
* `ピクセルオフセット`: チェックを入れると、2フレーム後に移動アニメーションが1ピクセル下に移動します。これは興味深い効果を追加します。
* `位置の保持`: _（まだ使用できません）_ チェックを入れると、セーブのロードやマップの変更後も、オブジェクトは常にその位置を保持します。チェックを外すと、セーブのロードやマップの変更後、オブジェクトの位置は再初期化されます。

![](https://rpg-paper-maker.github.io/basics/img/object-state-detection.png)

* `検出`: 各フレームでイベントを送信するために選択する検出。

### プロパティ <a id="properties"></a>

オブジェクトには、一連のプロパティもあります。HP、年齢、性別などがあります。それはすべて、ゲームの種類や必要なものによって異なります。

![プロパティの設定](https://rpg-paper-maker.github.io/basics/img/object-properties.png)

* `名前`: プロパティ名。
* `初期値`: オブジェクトが初めてロードされたときのプロパティの初期値。

## 例: 宝箱を作成する <a id="example-create-a-chest"></a>

宝箱を作成する簡単な方法を次に示します。

* システムマネージャーで、宝箱が開かれた状態のステートがあることを確認します。

![スクリーンショット](https://rpg-paper-maker.github.io/basics/img/states-opened.png)

* 各ステートのリアクションを完了し、通常ステートの最後にステートを置き換えることを忘れないでください。

![](https://rpg-paper-maker.github.io/basics/img/state-1.png)

![](https://rpg-paper-maker.github.io/basics/img/state-2.png)

## 既存のオブジェクトの編集/コピー/貼り付け/削除 <a id="edit-copy-paste-delete-an-existing-object"></a>

オブジェクトを `右クリック` することで、コンテキストメニューを開くことができます。

![オブジェクトの編集](https://rpg-paper-maker.github.io/basics/img/object-context-menu.png)

## モデル <a id="models"></a>

モデルは、一般的に使用できるオブジェクトです。`システムマネージャー` > `モデル` にモデルリストがあります。

![モデル](https://rpg-paper-maker.github.io/basics/img/object-hero.png)

たとえば、マップで摘むことができる花を追加する場合は、「花」というモデルを作成し、マップ内の空のオブジェクトにこのモデルを使用できます。

* モデルを作成する:

![モデルを作成する](https://rpg-paper-maker.github.io/basics/img/model-flower.png)

* マップオブジェクトにモデルフラワーを使用する:

![モデルの使用](https://rpg-paper-maker.github.io/basics/img/object-model-flower.png)

### デフォルトモデル <a id="default-model"></a>

ID 1のモデルは、新しいオブジェクトを作成するときのデフォルトモデルです。ここでデフォルト情報を変更して、オブジェクト作成に含めることができます。

### ヒーローモデル <a id="hero-model"></a>

ヒーローもオブジェクトであり、多くのシステムイベントに反応します。

* `キー押下` > `上、下、左、右ヒーロー`: 移動オブジェクトコマンドを使用して、オブジェクトヒーローを押された方向に移動します。
* `キー押下` > `左、右カメラ`: 移動カメラコマンドを使用して、カメラの向きを変更します。
* `キー押下` > `アクション`: イベント送信コマンドを使用して、カスタムイベント `HeroAction` を向かい合っているマスのオブジェクトに送信します。
* `キー押下` > `メインメニュー`: メインメニューを開くコマンドを使用して、メインメニューを開きます。

### 継承 <a id="inheritance"></a>

オブジェクトがモデルを使用しているが、コンテンツも持っている場合、この新しいコンテンツはモデルコンテンツの一部を置き換えます。モデル自体がモデルを持つことができます。

* **ステート**: 同じIDのステートが存在する場合、このステートIDのモデルリアクションは現在のコンテンツに置き換えられます。
* **プロパティ**: 同じ名前のプロパティが存在する場合、このプロパティ名のモデルリアクションは現在のコンテンツに置き換えられます。
* **イベント**: これは影響しません。

## マップ起動時のリアクション <a id="map-startup-reactions"></a>

マッププロパティで、このセクションを見ることができます。

![マップ起動時のリアクション](https://rpg-paper-maker.github.io/basics/img/map-startup-reactions.png)

これは単に、新しいマップに入ったときのキネマティクスなどに役立つ、非表示のオブジェクトです。これは非表示であるため、ステートグラフィックはありません。デフォルトでは、間隔パラメータに0、繰り返しパラメータにOFFを指定した `時間` イベントに反応します。つまり、これらのリアクションは、マップに入ったときに優先的に実行されます。これは、キネマティクスやその他のことに使用できます。

## 検出 <a id="detections"></a>

オブジェクトで検出を使用することは重要です。実際、`ヒーローアクション` イベントに反応するときには、すでに使用しています。`ヒーローアクション` イベントは、ヒーロー自身が目の前のオブジェクトに送信するイベントです。イベントの送信先を決定するために、`検出` と呼ばれるものを使用します。

`システムマネージャー` > `システム` で検出リストにアクセスできます。

![検出の設定](https://rpg-paper-maker.github.io/basics/img/detections.png)

そして、これが正面検出です！ここでは、イベントを正面に送信できることがはっきりとわかります。イベントを送信するオブジェクトのマスの位置と向きを示す矢印があります。`左クリック` で検出ボックスを追加し、`右クリック` で既存の検出ボックスを削除できます。

* `名前`: 検出名。
* `フィールド`: 増減できる検出フィールド。
  * `左`: イベントを送信するオブジェクトの左側にあるマスの数。
  * `右`: イベントを送信するオブジェクトの右側にあるマスの数。
  * `上`: イベントを送信するオブジェクトの上側にあるマスの数。
  * `下`: イベントを送信するオブジェクトの下側にあるマスの数。
* `新しいボックスの高さ`: 次のボックスに適用される高さ。
  * `マス`: 検出ボックスの高さのマス数。
  * `ピクセル`: 検出ボックスの高さに追加するピクセル数。
* `自動`: 検出ボックスの追加を自動的に生成する方法。
  * `円`: 指定された `半径` の円を描画します。
  * `長方形`: 指定された `長さ` と `幅` の長方形を描画します。
  * `生成`: このボタンをクリックすると、選択したフォームとオプションが生成されます。



